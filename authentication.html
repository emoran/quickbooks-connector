<!DOCTYPE html>













































































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="description" content="Documentation for QuickBooks Online Cloud Connector." />

<link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
<title>


| QuickBooks Online Cloud Connector

</title>
<link href="./assets/mule-developer-docs.css" rel="stylesheet" type="text/css" />
<link href="./assets/mule-developer-prettify.css" rel="stylesheet" type="text/css" />
<link href="./assets/customizations.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Ubuntu:300' rel='stylesheet' type='text/css'>
<script src="./assets/search_autocomplete.js" type="text/javascript"></script>
<script src="./assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="./assets/jquery-toc.js" type="text/javascript"></script>
<script src="./assets/mule-developer-docs.js" type="text/javascript"></script>
<script src="./assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("./", "./assets/");
</script>
<script src="./assets/customizations.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
<script type="text/javascript" charset="utf-8">
  var is_ssl = ("https:" == document.location.protocol);
  var asset_host = is_ssl ? "https://s3.amazonaws.com/getsatisfaction.com/" : "http://s3.amazonaws.com/getsatisfaction.com/";
  document.write(unescape("%3Cscript src='" + asset_host + "javascripts/feedback-v2.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript" charset="utf-8">
  var feedback_widget_options = {};

  feedback_widget_options.display = "overlay";
  feedback_widget_options.company = "mulesoft";
  feedback_widget_options.placement = "right";
  feedback_widget_options.color = "#2F74AE";
  feedback_widget_options.style = "question";

  feedback_widget_options.tag = "QuickBooks Online Cloud Connector";

  feedback_widget_options.limit = "3";

  var feedback_widget = new GSFN.feedback_widget(feedback_widget_options);
</script>
</head>

<body class="gc-documentation">

<div id="header">
    <div id="headerLeft">
    
      <span id="masthead-title">QuickBooks Online Cloud Connector</span>
    
    <ul id="header-tabs" class="authentication">
    
    	<li id="guide"><a href="./guide/install.html">
	    	<span class="en">Install Guide</span>
    	</a></li>
    
    	<li id="authentication"><a href="./authentication.html">
	    	<span class="en">Authentication Guide</span>
    	</a></li>
    
    	<li id="java"><a href="./java/packages.html">
	    	<span class="en">Java API Reference</span>
    	</a></li>
    
    	<li id="mule"><a href="./mule/modules.html">
	    	<span class="en">Mule API Reference</span>
    	</a></li>
    
    </ul>
    </div>
    <div id="headerRight">
      <a href="http://www.mulesoft.com" tabindex="-1">
      <img src="./assets//images/mulesoft-logo-final.gif" alt="MuleSoft" border="0" id="mulesoftlogo"></a><br/>
      
  <div id="searchContainer" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, './')"
                      onkeyup="return search_changed(event, false, './')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      
    </div>
</div><!-- header -->


<div class="g-section g-tpl-240" id="body-content">

	<div class="g-unit g-first side-nav-resizable" id="side-nav">
	      <div id="swapper">
	        <div id="side-nav">
                <script type="text/javascript" charset="utf-8">
                    $(document).ready(function(){
                        $("ul#toc").tableOfContents();
                        buildToggleLists();
                    })
                </script>
                <ul id="toc">
                </ul>
	        </div><!-- end nav-panels -->
	      </div><!-- end swapper -->
	    </div> <!-- end side-nav -->

<div class="g-unit" id="doc-content">

<div id="jd-content">

<h1>CONFIGURING OPENID AND OAUTH</h1>

<h1>OpenID</h1>

<h2>Starting OpenID flow</h2>

<p>The first step is to call OpenID provider and redirect the user to credentials page. The flow for this purpose is:</p>

<pre><code>&lt;flow name="InitializeOpenID"&gt;
    &lt;!-- INBOUND ENDPOINT --&gt;
    &lt;http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" /&gt;
    &lt;quickbooks:open-id-initialize config-ref="Quickbooks_Online" callbackUrl="http://localhost:8090/openId" /&gt; 
&lt;/flow&gt;
</code></pre>

<p>The callbackUrl parameter has to point to our callback inbound-endpoint.</p>

<h2>Processing callback</h2>

<p>This connector provides an explicit processor to receive and process the callback.</p>

<pre><code>&lt;flow name="VerifyResponseOpenID"&gt;
    &lt;!-- INBOUND ENDPOINT --&gt;
    &lt;http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8090" path="openId"/&gt;
    &lt;quickbooks:verify-open-id config-ref="Quickbooks_Online" /&gt;
    &lt;!-- REST_OF_YOUR_FLOW --&gt;
&lt;/flow&gt;
</code></pre>

<p>The processor verify-open-id includes two optional parameters:</p>

<ul>
<li><p>receivingUrl: the callback url that was generated during initialize which is used for validating the response. By default it is extracted from the Mule message.</p></li>
<li><p>responseParameters: a map with the query string parameters. By default it is extracted from the Mule message.</p></li>
</ul>

<h1>Using OAuth</h1>

<p>Intuit provides OAuth1.0a support for authenticating against QuickBooks Online applications. As the OpenID support this connector provides two operations -for initializing and processing the callback- in order to make it as flexible and configurable as possible. </p>

<p>This connector includes multi-tenant support for OAuth based applications.</p>

<h2>Starting OAuth dance</h2>

<p>The first step in OAuth dance is to obtain the request token from Intuit OAuth provider. The processor for this is:</p>

<pre><code>&lt;flow name="Authorize"&gt;
    &lt;!-- INBOUND ENDPOINT --&gt;
    &lt;http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081"/&gt;
    &lt;quickbooks:auth-user config-ref="Quickbooks_Online" accessTokenUrl="https://oauth.intuit.com/oauth/v1/get_access_token" authorizationUrl="https://appcenter.intuit.com/Connect/Begin" callbackUrl="http://localhost:8090" requestTokenId="#[groovy:message.getSessionProperty('requestTokenIdentifier')]" requestTokenUrl="https://oauth.intuit.com/oauth/v1/get_request_token"/&gt;
&lt;/flow&gt;
</code></pre>

<p>The parameters involved are:</p>

<ul>
<li><p>accessTokenUrl, authorizationUrl and requestTokenUrl: Intuit provider url's.</p></li>
<li><p>callbackUrl: our callback inbound-endpoint address.</p></li>
<li><p>requestTokenId: an unique identifier for the generated request token. This is used for multi-tenant support since the connector gets the request token and store it in the ObjectStore in order to exchange it in the future for an access token. This value has to be related to the tenant that calls the flow and it is concatenated to the callbackUrl using the variable name 'userId'.</p></li>
</ul>

<h2>Getting the access token</h2>

<p>This is the moment when the connector exchanges the authenticated token for an access token/secret. The flow for doing this is:</p>

<pre><code>&lt;flow name="GetAccessToken"&gt;
    &lt;!-- INBOUND ENDPOINT --&gt;
    &lt;http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8090"/&gt;
    &lt;quickbooks:get-access-token config-ref="Quickbooks_Online" /&gt;
    &lt;!-- REST_OF_YOUR_FLOW --&gt;
&lt;/flow&gt;
</code></pre>

<p>The processor get-access-token includes the following optional parameters:</p>

<ul>
<li><p>apiUrl: the tenant API url. If this is blank the connector gets it from Intuit.</p></li>
<li><p>verifier: OAuth verifier. By default it is extracted from the Mule message using the inbound property 'oauth_verifier'.</p></li>
<li><p>requestTokenId: the unique identifier for the authenticated request token. By default it is extracted from the Mule message using the inbound property 'userId'.</p></li>
<li><p>userIdentifier: the value used for storing the OAuth credentials -access token and secret- in the ObjectStore. By default it is extracted from the Mule message using the inbound property 'realmId'.</p></li>
</ul>

<h2>Calling QBO operations</h2>

<p>Once the user is authenticated -or the credentials are available in the ObjectStore- it is possible to call the QuickBooks Online operations. The following is an example for list-accounts:</p>

<pre><code>&lt;flow name="ListAccounts"&gt;
    &lt;quickbooks:find-objects config-ref="Quickbooks_Online" accessTokenId="#[groovy:message.getSessionProperty('accessTokenIdentifier')]" queryFilter="LastUpdatedTime :AFTER: 2012-06-10T14:30:00-0700" type="ACCOUNT" /&gt;
    &lt;json:object-to-json-transformer doc:name="Object to JSON"/&gt;
    &lt;logger level="INFO" doc:name="Logger"/&gt;
&lt;/flow&gt;
</code></pre>

<p>accessTokenId is the parameter used by the operations for retrieving the corresponding credentials.</p>


<div id="footer">
Generated by <a href="http://www.mulesoft.com/devkit">Mule DevKit</a>. Document generation technology based on <a href="http://code.google.com/p/doclava/">Google's Doclava</a>.
</div> <!-- end footer -->

</div><!-- end jd-content -->
</div> <!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize mule-developer-docs.js */
</script>

</body>
</html>
